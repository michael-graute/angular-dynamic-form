<div [formGroup]="form" [class]="{'hidden': hidden, 'form-floating': config?.settings?.floatingLabel}" class="mb-2">
  @if (config?.label && !config?.settings?.floatingLabel) {
    <label [for]="id" [class]="{'required': config?.required}">{{config?.label}}</label>
  }
  @if (!config?.multiple) {
    <input class="form-control" [class]="{'required': config?.required}" [type]="config?.controlType ?? 'text'" [id]="id" [formControlName]="key" [required]="config?.required || false" [placeholder]="config?.floatingLabel ?? ''">
    @if (config?.label && config?.settings?.floatingLabel) {
      <label [for]="id" [class]="{'required': config?.required}">{{config?.label}}</label>
    }
    @if (config?.helpText) {
      <div class="form-text">{{config?.helpText}}</div>
    }
    @if (control?.errors) {
      <ul class="error-messages form-text text-danger">
        @for (message of getErrorMessages(); track $index) {
          <li>{{message}}</li>
        }
      </ul>
    }
  }
  @if (config?.multiple) {
    @if (config?.multipleLabel) {
      <span>{{config?.multipleLabel}}</span>
    }
    @for (item of formArray.controls; track item; let i = $index) {
      <div [formArrayName]="key" class="row mb-2">
        <div class="col-11">
          <div [class]="{'form-floating': config?.settings?.floatingLabel}">
            <input class="form-control" [class]="{'required': config?.required}" [type]="config?.controlType ?? 'text'" [id]="id + i" [formControlName]="i" [required]="config?.required || false" [placeholder]="config?.floatingLabel ?? ''">
            @if (config?.label && config?.settings?.floatingLabel) {
              <label [for]="id + i" [class]="{'required': config?.required}">{{config?.label}}</label>
            }
            @if (item?.errors) {
              <ul class="error-messages form-text text-danger">
                @for (message of getMultipleErrorMessages(item); track $index) {
                  <li>{{message}}</li>
                }
              </ul>
            }
          </div>
        </div>
        <div class="col-1">
          <button type="button" class="btn btn-danger" (click)="removeItem(i)"><i [class]="config?.settings?.removeButton?.icon ?? 'bi-pus-circle'"></i> {{config?.settings?.removeButton?.label ?? 'Delete'}}</button>
        </div>
      </div>
    }
    <div class="d-flex gap-1 justify-content-end">
      <button type="button" class="btn btn-success" (click)="addItem()"><i [class]="config?.settings?.addButton?.icon ?? 'bi-pus-circle'"></i> {{config?.settings?.addButton?.label ?? 'Add'}}</button>
    </div>
  }
</div>
